"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9234],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),l=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=l(r),d=o,h=c["".concat(p,".").concat(d)]||c[d]||m[d]||i;return r?n.createElement(h,a(a({ref:t},u),{},{components:r})):n.createElement(h,a({ref:t},u))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[c]="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=r[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},12368:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=r(83117),o=(r(67294),r(3905));const i={title:"Bluetooth Mapper E2E Test",sidebar_position:3},a=void 0,s={unversionedId:"developer/test/bluetooth_mapper_e2e",id:"developer/test/bluetooth_mapper_e2e",title:"Bluetooth Mapper E2E Test",description:"The test setup required for running the end to end test of bluetooth mapper requires two separate machines in bluetooth range.",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/developer/test/bluetooth_mapper_e2e.md",sourceDirName:"developer/test",slug:"/developer/test/bluetooth_mapper_e2e",permalink:"/gameone/docs/developer/test/bluetooth_mapper_e2e",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Bluetooth Mapper E2E Test",sidebar_position:3},sidebar:"documentationSideBar",previous:{title:"\u8fb9\u7f18\u5185\u5b58\u5360\u7528\u6d4b\u8bd5",permalink:"/gameone/docs/developer/test/memfootprint"},next:{title:"\u8def\u7531\u7ba1\u7406",permalink:"/gameone/docs/developer/custom_message_deliver"}},p={},l=[{value:"Steps for running E2E tests",id:"steps-for-running-e2e-tests",level:2},{value:"Test Server Creation",id:"test-server-creation",level:4}],u={toc:l},c="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The test setup required for running the end to end test of bluetooth mapper requires two separate machines in bluetooth range.\nThe paypal/gatt package used for bluetooth mapper makes use of hci interface for bluetooth communication. Out of two machines specified,\none is used for running bluetooth mapper and other is used for running a test server which publishes data that the mapper use for processing.\nThe test server created here is also using the paypal/gatt package."),(0,o.kt)("h2",{id:"steps-for-running-e2e-tests"},"Steps for running E2E tests"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Turn ON bluetooth service of both machines"),(0,o.kt)("li",{parentName:"ol"},"Run server on first machine. Follow steps given below for running the test server."),(0,o.kt)("li",{parentName:"ol"},"For running mapper tests on second machine, clone kubeedge code and follow steps 4,5 and 6."),(0,o.kt)("li",{parentName:"ol"},'Update "dockerhubusername" and "dockerhubpassword" in tests/e2e/scripts/fast_test.sh with your credentials.'),(0,o.kt)("li",{parentName:"ol"},"Compile bluetooth mapper e2e by executing the following command in $GOPATH/src/github.com/kubeedge/kubeedge.\n",(0,o.kt)("inlineCode",{parentName:"li"},"bash -x tests/e2e/scripts/compile.sh bluetooth")),(0,o.kt)("li",{parentName:"ol"},"Run bluetooth mapper e2e by executing the following command in $GOPATH/src/github.com/kubeedge/kubeedge.\n",(0,o.kt)("inlineCode",{parentName:"li"},"bash -x tests/e2e/scripts/execute.sh bluetooth"))),(0,o.kt)("h4",{id:"test-server-creation"},"Test Server Creation"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy devices folder in tests/e2e/stubs and keep it in path TESTSERVER/src/github.com in first machine.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update the following in devices/mockserver.go"),(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"package devices -> package main"),(0,o.kt)("li",{parentName:"ol"},'import "github.com/kubeedge/kubeedge/tests/stubs/devices/services" to "github.com/devices/services"'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Build the binary using\n",(0,o.kt)("inlineCode",{parentName:"p"},"go build mockserver.go"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run the server using\n",(0,o.kt)("inlineCode",{parentName:"p"},"sudo ./mockserver -logtostderr -duration=<specify duration for which test server should be running>")),(0,o.kt)("p",{parentName:"li"}," ",(0,o.kt)("em",{parentName:"p"},"sudo is required for getting hci control of the machine.")))),(0,o.kt)("p",null,"This runs your test server which publishes data for the mapper to process."))}m.isMDXComponent=!0}}]);