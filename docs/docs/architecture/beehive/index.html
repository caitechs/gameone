<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-architecture/beehive">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">公共组件 | CassItComp</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://caitechs.github.io/gameone/docs/architecture/beehive"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="公共组件 | CassItComp"><meta data-rh="true" name="description" content="Beehive Overview"><meta data-rh="true" property="og:description" content="Beehive Overview"><link data-rh="true" rel="canonical" href="https://caitechs.github.io/gameone/docs/architecture/beehive"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/docs/architecture/beehive" hreflang="zh"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/docs/architecture/beehive" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gameone/blog/rss.xml" title="CassItComp RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gameone/blog/atom.xml" title="CassItComp Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9PL5BPEXGS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9PL5BPEXGS",{anonymize_ip:!0})</script>






<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="manifest" href="/favicons/site.webmanifest">
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-config" content="/favicons/browserconfig.xml"><link rel="stylesheet" href="/gameone/assets/css/styles.c5a3b718.css">
<link rel="preload" href="/gameone/assets/js/runtime~main.94491653.js" as="script">
<link rel="preload" href="/gameone/assets/js/main.07136e89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/gameone/"><div class="navbar__logo"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Gameone 机器自动评分系统</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_self" href="/gameone/docs">文档</a><a class="navbar__item navbar__link" target="_self" href="/gameone/blog">博客  </a><a class="navbar__item navbar__link" href="/gameone/case-studies">案例中心</a><a class="navbar__item navbar__link" href="/gameone/partners">合作伙伴</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caitechs/gameone" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link heade-icon"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/gameone/docs/architecture/beehive" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gameone/docs/">入门指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/">为什么选择KubeEdge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/welcome/getting-started">快速开始</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/welcome/available-doc-versions">支持的文档版本</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/setup">安装</a><button aria-label="打开/收起侧边栏菜单「安装」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/gameone/docs/category/architecture">KubeEdge架构</a><button aria-label="打开/收起侧边栏菜单「KubeEdge架构」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gameone/docs/architecture/beehive">公共组件</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gameone/docs/category/cloud-components">云上组件</a><button aria-label="打开/收起侧边栏菜单「云上组件」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/gameone/docs/category/edge-components">边缘组件</a><button aria-label="打开/收起侧边栏菜单「边缘组件」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/core-concept">核心概念</a><button aria-label="打开/收起侧边栏菜单「核心概念」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/advanced-configuration">高级配置</a><button aria-label="打开/收起侧边栏菜单「高级配置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/developer-guide">开发者指南</a><button aria-label="打开/收起侧边栏菜单「开发者指南」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/community">社区</a><button aria-label="打开/收起侧边栏菜单「社区」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/subproject">KubeEdge子项目</a><button aria-label="打开/收起侧边栏菜单「KubeEdge子项目」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/frequently-asked-questions-faq">常见问题</a><button aria-label="打开/收起侧边栏菜单「常见问题」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/gameone/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/gameone/docs/category/architecture"><span itemprop="name">KubeEdge架构</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">公共组件</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>公共组件</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beehive-overview">Beehive Overview<a href="#beehive-overview" class="hash-link" aria-label="Beehive Overview的直接链接" title="Beehive Overview的直接链接">​</a></h2><p>Beehive is a messaging framework based on go-channels for communication between modules of KubeEdge. A module registered with beehive can communicate with other beehive modules if the name with which other beehive module is registered or the name of the group of the module is known.
Beehive supports following module operations:</p><ol><li>Add Module</li><li>Add Module to a group</li><li>CleanUp (remove a module from beehive core and all groups)</li></ol><p>Beehive supports following message operations:</p><ol><li>Send to a module/group</li><li>Receive by a module</li><li>Send Sync to a module/group</li><li>Send Response to a sync message</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-format">Message Format<a href="#message-format" class="hash-link" aria-label="Message Format的直接链接" title="Message Format的直接链接">​</a></h2><p>Message has 3 parts</p><ol><li>Header:<ol><li>ID: message ID (string)</li><li>ParentID: if it is a response to a sync message then parentID exists (string)</li><li>TimeStamp: time when message was generated (int)</li><li>Sync: flag to indicate if message is of type sync (bool)</li></ol></li><li>Route:<ol><li>Source: origin of message (string)</li><li>Group: the group to which the message has to be broadcasted (string)</li><li>Operation: what’s the operation on the resource (string)</li><li>Resource: the resource to operate on (string)</li></ol></li><li>Content: content of the message (interface{})</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-module">Register Module<a href="#register-module" class="hash-link" aria-label="Register Module的直接链接" title="Register Module的直接链接">​</a></h2><ol><li>On starting edgecore,  each module tries to register itself with the beehive core.</li><li>Beehive core maintains a map named modules which has module name as key and implementation of module interface as value.</li><li>When a module tries to register itself with beehive core, beehive core checks from already loaded modules.yaml config file to check if the module is enabled. If it is enabled, it is added in the modules map or else it is added in the disabled modules map.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="channel-context-structure-fields">Channel Context Structure Fields<a href="#channel-context-structure-fields" class="hash-link" aria-label="Channel Context Structure Fields的直接链接" title="Channel Context Structure Fields的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="important-for-understanding-beehive-operations">(<em>Important for understanding beehive operations</em>)<a href="#important-for-understanding-beehive-operations" class="hash-link" aria-label="important-for-understanding-beehive-operations的直接链接" title="important-for-understanding-beehive-operations的直接链接">​</a></h3><ol><li><strong>channels:</strong> channels is a map of string(key) which is name of module and chan(value) of message which will used to send message to the respective module.</li><li><strong>chsLock:</strong> lock for channels map</li><li><strong>typeChannels:</strong> typeChannels is a map of string(key)which is group name and (map of string(key) to chan(value) of message ) (value) which is map of name of each module in the group to the channels of corresponding module.</li><li><strong>typeChsLock:</strong> lock for typeChannels map</li><li><strong>anonChannels:</strong> anonChannels is a map of string(parentid) to chan(value) of message which will be used for sending response for a sync message.</li><li><strong>anonChsLock:</strong> lock for anonChannels map</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="module-operations">Module Operations<a href="#module-operations" class="hash-link" aria-label="Module Operations的直接链接" title="Module Operations的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-module">Add Module<a href="#add-module" class="hash-link" aria-label="Add Module的直接链接" title="Add Module的直接链接">​</a></h3><ol><li>Add module operation first creates a new channel of message type.</li><li>Then the module name(key) and its channel(value) is added in the channels map of channel context structure.</li><li>Eg: add edged module</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext.Addmodule(“edged”)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-module-to-group">Add Module to Group<a href="#add-module-to-group" class="hash-link" aria-label="Add Module to Group的直接链接" title="Add Module to Group的直接链接">​</a></h3><ol><li>addModuleGroup first gets the channel of a module from the channels map.</li><li>Then the module and its channel is added in the typeChannels map where key is the group and in the value is a map in which (key is module name and value is the channel).</li><li>Eg: add edged in edged group. Here 1st edged is module name and 2nd edged is the group name.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext.AddModuleGroup(“edged”,”edged”)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cleanup">CleanUp<a href="#cleanup" class="hash-link" aria-label="CleanUp的直接链接" title="CleanUp的直接链接">​</a></h3><ol><li>CleanUp deletes the module from channels map and deletes the module from all groups(typeChannels map).</li><li>Then the channel associated with the module is closed.</li><li>Eg: CleanUp edged module</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext.CleanUp(“edged”)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-operations">Message Operations<a href="#message-operations" class="hash-link" aria-label="Message Operations的直接链接" title="Message Operations的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="send-to-a-module">Send to a Module<a href="#send-to-a-module" class="hash-link" aria-label="Send to a Module的直接链接" title="Send to a Module的直接链接">​</a></h3><ol><li>Send gets the channel of a module from channels map.</li><li>Then the message is put on the channel.</li><li>Eg: send message to edged.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext.Send(“edged”,message)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="send-to-a-group">Send to a Group<a href="#send-to-a-group" class="hash-link" aria-label="Send to a Group的直接链接" title="Send to a Group的直接链接">​</a></h3><ol><li>SendToGroup gets all modules(map) from the typeChannels map.</li><li>Then it iterates over the map and sends the message on the channels of all modules in the map.</li><li>Eg: message to be sent to all modules in edged group.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext.SendToGroup(“edged”,message) message will be sent to all modules in edged group.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="receive-by-a-module">Receive by a Module<a href="#receive-by-a-module" class="hash-link" aria-label="Receive by a Module的直接链接" title="Receive by a Module的直接链接">​</a></h3><ol><li>Receive gets the channel of a module from channels map.</li><li>Then it waits for a message to arrive on that channel and returns the message. Error is returned if there is any.</li><li>Eg: receive message for edged module</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> coreContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Receive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;edged&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sendsync-to-a-module">SendSync to a Module<a href="#sendsync-to-a-module" class="hash-link" aria-label="SendSync to a Module的直接链接" title="SendSync to a Module的直接链接">​</a></h3><ol><li>SendSync takes 3 parameters, (module, message and timeout duration)</li><li>SendSync first gets the channel of the module from the channels map.</li><li>Then the message is put on the channel.</li><li>Then a new channel of message is created and is added in anonChannels map where key is the messageID.</li><li>Then it waits for the message(response) to be received on the anonChannel it created till timeout.</li><li>If message is received before timeout, message is returned with nil error or else timeout error is returned.</li><li>Eg: send sync to edged with timeout duration 60 seconds</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> coreContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;edged&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">60</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sendsync-to-a-group">SendSync to a Group<a href="#sendsync-to-a-group" class="hash-link" aria-label="SendSync to a Group的直接链接" title="SendSync to a Group的直接链接">​</a></h3><ol><li>Get the list of modules from typeChannels map for the group.</li><li>Create a channel of message with size equal to the number of modules in that group and put in anonChannels map as value with key as messageID.</li><li>Send the message on channels of all the modules.</li><li>Wait till timeout. If the length of anonChannel = no of modules in that group, check if all the messages in the channel have parentID = messageID. If no return error else return nil error.</li><li>If timeout is reached,return timeout error.</li><li>Eg: send sync message to edged group with timeout duration 60 seconds</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> coreContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendToGroupSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;edged&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">60</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sendresp-to-a-sync-message">SendResp to a sync message<a href="#sendresp-to-a-sync-message" class="hash-link" aria-label="SendResp to a sync message的直接链接" title="SendResp to a sync message的直接链接">​</a></h3><ol><li>SendResp is used to send response for a sync message.</li><li>The messageID for which response is sent needs to be in the parentID of the response message.</li><li>When SendResp is called, it checks if for the parentID of response message , there exists a channel is anonChannels.</li><li>If channel exists, message(response) is sent on that channel.</li><li>Or else error is logged.</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coreContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SendResp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">respMessage</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/gameone/docs/category/architecture"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gameone/docs/category/cloud-components"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Cloud Components</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#beehive-overview" class="table-of-contents__link toc-highlight">Beehive Overview</a></li><li><a href="#message-format" class="table-of-contents__link toc-highlight">Message Format</a></li><li><a href="#register-module" class="table-of-contents__link toc-highlight">Register Module</a></li><li><a href="#channel-context-structure-fields" class="table-of-contents__link toc-highlight">Channel Context Structure Fields</a><ul><li><a href="#important-for-understanding-beehive-operations" class="table-of-contents__link toc-highlight">(<em>Important for understanding beehive operations</em>)</a></li></ul></li><li><a href="#module-operations" class="table-of-contents__link toc-highlight">Module Operations</a><ul><li><a href="#add-module" class="table-of-contents__link toc-highlight">Add Module</a></li><li><a href="#add-module-to-group" class="table-of-contents__link toc-highlight">Add Module to Group</a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">CleanUp</a></li></ul></li><li><a href="#message-operations" class="table-of-contents__link toc-highlight">Message Operations</a><ul><li><a href="#send-to-a-module" class="table-of-contents__link toc-highlight">Send to a Module</a></li><li><a href="#send-to-a-group" class="table-of-contents__link toc-highlight">Send to a Group</a></li><li><a href="#receive-by-a-module" class="table-of-contents__link toc-highlight">Receive by a Module</a></li><li><a href="#sendsync-to-a-module" class="table-of-contents__link toc-highlight">SendSync to a Module</a></li><li><a href="#sendsync-to-a-group" class="table-of-contents__link toc-highlight">SendSync to a Group</a></li><li><a href="#sendresp-to-a-sync-message" class="table-of-contents__link toc-highlight">SendResp to a sync message</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">2023 © GameOne Project Authors. All rights reserved. GameOne项目组，版权所有！</div></div></div></footer></div>
<script src="/gameone/assets/js/runtime~main.94491653.js"></script>
<script src="/gameone/assets/js/main.07136e89.js"></script>
</body>
</html>