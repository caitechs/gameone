<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-faq/setup">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">安装 | CassItComp</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://caitechs.github.io/gameone/docs/faq/setup"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="安装 | CassItComp"><meta data-rh="true" name="description" content="If you encounter problems during installation, such as cloudcore/edgecore don&#x27;t start successfully, or they both start but edge nodes are always in NotReady, or pod cannot be deployed to edge nodes. This doc can help you debug how to fix the issues."><meta data-rh="true" property="og:description" content="If you encounter problems during installation, such as cloudcore/edgecore don&#x27;t start successfully, or they both start but edge nodes are always in NotReady, or pod cannot be deployed to edge nodes. This doc can help you debug how to fix the issues."><link data-rh="true" rel="canonical" href="https://caitechs.github.io/gameone/docs/faq/setup"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/docs/faq/setup" hreflang="zh"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/docs/faq/setup" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gameone/blog/rss.xml" title="CassItComp RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gameone/blog/atom.xml" title="CassItComp Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9PL5BPEXGS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9PL5BPEXGS",{anonymize_ip:!0})</script>






<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="manifest" href="/favicons/site.webmanifest">
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-config" content="/favicons/browserconfig.xml"><link rel="stylesheet" href="/gameone/assets/css/styles.c5a3b718.css">
<link rel="preload" href="/gameone/assets/js/runtime~main.94491653.js" as="script">
<link rel="preload" href="/gameone/assets/js/main.07136e89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/gameone/"><div class="navbar__logo"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Gameone 机器自动评分系统</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" target="_self" href="/gameone/docs">文档</a><a class="navbar__item navbar__link" target="_self" href="/gameone/blog">博客  </a><a class="navbar__item navbar__link" href="/gameone/case-studies">案例中心</a><a class="navbar__item navbar__link" href="/gameone/partners">合作伙伴</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caitechs/gameone" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link heade-icon"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/gameone/docs/faq/setup" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/gameone/docs/">入门指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/">为什么选择KubeEdge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/welcome/getting-started">快速开始</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/gameone/docs/welcome/available-doc-versions">支持的文档版本</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/setup">安装</a><button aria-label="打开/收起侧边栏菜单「安装」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/architecture">KubeEdge架构</a><button aria-label="打开/收起侧边栏菜单「KubeEdge架构」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/core-concept">核心概念</a><button aria-label="打开/收起侧边栏菜单「核心概念」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/advanced-configuration">高级配置</a><button aria-label="打开/收起侧边栏菜单「高级配置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/developer-guide">开发者指南</a><button aria-label="打开/收起侧边栏菜单「开发者指南」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/community">社区</a><button aria-label="打开/收起侧边栏菜单「社区」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/gameone/docs/category/subproject">KubeEdge子项目</a><button aria-label="打开/收起侧边栏菜单「KubeEdge子项目」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/gameone/docs/category/frequently-asked-questions-faq">常见问题</a><button aria-label="打开/收起侧边栏菜单「常见问题」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/gameone/docs/faq/setup">安装</a></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/gameone/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/gameone/docs/category/frequently-asked-questions-faq"><span itemprop="name">常见问题</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">安装</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>安装</h1></header><p>If you encounter problems during installation, such as cloudcore/edgecore don&#x27;t start successfully, or they both start but edge nodes are always in <code>NotReady</code>, or pod cannot be deployed to edge nodes. This doc can help you debug how to fix the issues.</p><h1>Common knowledge</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-check-logs">How to check logs?<a href="#how-to-check-logs" class="hash-link" aria-label="How to check logs?的直接链接" title="How to check logs?的直接链接">​</a></h2><p>The first step to start investigating installation failures or when a thing does not work as expected, is to find and look at the related installation logs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-check-cloudcore-logs">How to check cloudcore logs?<a href="#how-to-check-cloudcore-logs" class="hash-link" aria-label="How to check cloudcore logs?的直接链接" title="How to check cloudcore logs?的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-container-mode">cloudcore in container mode<a href="#cloudcore-in-container-mode" class="hash-link" aria-label="cloudcore in container mode的直接链接" title="cloudcore in container mode的直接链接">​</a></h4><p>If you deploy <code>cloudcore</code> in container mode, in other words, when <code>cloudcore</code> is deployed inside a k8s cluster and managed by k8s directly, you can use <code>kubectl logs</code> command to get cloudcore logs, just like below. First use <code>kubectl get pod -n kubeedge</code> to get <code>cloudcore</code> pod NAME, and then run <code>kubectl logs cloudcore-f88bbf5bb-kcvf4 -n kubeedge</code>(please replace <code>cloudcore-f88bbf5bb-kcvf4</code> with the actual cloudcore pod name), and then you can get logs</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get pod -n kubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-kcvf4   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kubectl logs cloudcore-f88bbf5bb-kcvf4 -n kubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">W1118 02:16:02.810219       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> validation.go:154</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> TLSTunnelPrivateKeyFile does not exist </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /etc/kubeedge/certs/server.key, will load from secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">W1118 02:16:02.810256       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> validation.go:157</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> TLSTunnelCertFile does not exist </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /etc/kubeedge/certs/server.crt, will load from secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">W1118 02:16:02.810263       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> validation.go:160</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> TLSTunnelCAFile does not exist </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> /etc/kubeedge/ca/rootCA.crt, will load from secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I1118 02:16:02.810280       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> server.go:92</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Version: v1.12.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-binary-mode">cloudcore in binary mode<a href="#cloudcore-in-binary-mode" class="hash-link" aria-label="cloudcore in binary mode的直接链接" title="cloudcore in binary mode的直接链接">​</a></h4><p>If you deploy <code>cloudcore</code> in binary mode, in other words, <code>cloudcore</code> is running as a service/process on the physical machine directly, you should check whether <code>cloudcore</code> is managed by <code>systemd</code> or not. If so, you can run <code>journalctl -u cloudcore.service -xe</code> to get cloudcore logs. If not, the cloudcore logs are written to file <code>/var/log/kubeedge/cloudcore.log</code>, you can run <code>tail</code> or <code>cat</code> related commands to read log file.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># journalctl -u cloudcore.service -xe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># tail -f /var/log/kubeedge/cloudcore.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># cat /var/log/kubeedge/cloudcore.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-check-edgecore-logs">How to check edgecore logs?<a href="#how-to-check-edgecore-logs" class="hash-link" aria-label="How to check edgecore logs?的直接链接" title="How to check edgecore logs?的直接链接">​</a></h3><p><code>edgecore</code> is always installed in binary mode, that means <code>edgecore</code> cannot be deployed to a container, it can only run as a physical progress on a machine. You should check whether <code>edgecore</code> is managed by <code>systemd</code> or not. If so, you should run <code>journalctl -u edgecore.service -xe</code>. Or, the edgecore logs are written to file <code>/etc/kubeedge/kubeedge/edge/edgecore.log</code>, you can run <code>tail</code> or <code>cat</code> related commands to read log file.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># journalctl -u edgecore.service -xe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># tail -f /etc/kubeedge/kubeedge/edge/edgecore.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># cat /etc/kubeedge/kubeedge/edge/edgecore.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-update-configuration">How to update configuration?<a href="#how-to-update-configuration" class="hash-link" aria-label="How to update configuration?的直接链接" title="How to update configuration?的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-modify-cloudcore-configuration">How to modify cloudcore configuration?<a href="#how-to-modify-cloudcore-configuration" class="hash-link" aria-label="How to modify cloudcore configuration?的直接链接" title="How to modify cloudcore configuration?的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-container-mode-1">cloudcore in container mode<a href="#cloudcore-in-container-mode-1" class="hash-link" aria-label="cloudcore in container mode的直接链接" title="cloudcore in container mode的直接链接">​</a></h4><p>If you deploy <code>cloudcore</code> in container mode, the cloudcore configuration file is stored in the <code>cloudcore</code> configmap of the <code>kubeedge</code> namespace, and is automatically mounted to the <code>cloudcore</code> pod. You can get it using command <code>kubectl get configmap cloudcore -nkubeedge -oyaml</code>. Cloudcore configuration is stored in its data field.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get configmap cloudcore -nkubeedge -oyaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cloudcore.yaml: &quot;apiVersion: cloudcore.config.kubeedge.io/v1alpha2</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">nkind: CloudCore</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">nkubeAPIConfig:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> kubeConfig: </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">n  master: </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">nmodules:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">n  cloudHub:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">n    advertiseAddress:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to update the cloudcore configuration, you can run <code>kubectl edit configmap cloudcore -n kubeedge</code> to update it. After modifying the configmap data, you can find that the configuration file mapped in the pod to <code>/etc/kubeedge/config/cloudcore.yaml</code> is updated the same as you would expect by exec to the cloudcore pod (using <code>kubectl exec</code> command).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl get pod -nkubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-kcvf4   1/1     Running   0          3m29s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl exec -it cloudcore-f88bbf5bb-kcvf4 -nkubeedge sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # cat /etc/kubeedge/config/cloudcore.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: cloudcore.config.kubeedge.io/v1alpha2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: CloudCore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubeAPIConfig:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubeConfig: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  master: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cloudHub:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    advertiseAddress:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To apply the changed the configuration file and take it into effect, we need to restart the <code>cloudcore</code> pod. You can run <code>kubectl delete pod</code> command to stop the original <code>cloudcore</code> pod, and k8s will ensure a new <code>cloudcore</code> pod is created with the new updated configuration.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get pod -n kubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-kcvf4   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          82m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kubectl delete pod cloudcore-f88bbf5bb-kcvf4 -nkubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod </span><span class="token string" style="color:#e3116c">&quot;cloudcore-f88bbf5bb-kcvf4&quot;</span><span class="token plain"> deleted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-binary-mode-1">cloudcore in binary mode<a href="#cloudcore-in-binary-mode-1" class="hash-link" aria-label="cloudcore in binary mode的直接链接" title="cloudcore in binary mode的直接链接">​</a></h4><p>If you deploy <code>cloudcore</code> in binary mode. The default configuration file is located on <code>/etc/kubeedge/config/cloudcore.yaml</code>. You can modify it with <code>vim</code> or <code>vi</code> command. If your operating system supports <code>systemd</code> and manage <code>cloudcore</code> with <code>systemd</code>, you can run <code>systemctl restart cloudcore</code> to restart <code>cloudcore</code> with updated configuration. If not, you can just use <code>pkill</code> command to stop origin <code>cloudcore</code> progress, and start it again manually.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-modify-edgecore-configuration">How to modify edgecore configuration?<a href="#how-to-modify-edgecore-configuration" class="hash-link" aria-label="How to modify edgecore configuration?的直接链接" title="How to modify edgecore configuration?的直接链接">​</a></h3><p>We always deploy <code>edgecore</code> in binary mode, that means, we couldn&#x27;t deploy <code>edgecore</code> in a pod. And the default configuration file is located on <code>/etc/kubeedge/config/edgecore.yaml</code>. You can modify it with <code>vim</code> or <code>vi</code> command. If your operating system supports <code>systemd</code> and manage <code>edgecore</code> with <code>systemd</code>, you can run <code>systemctl restart edgecore</code> to restart <code>edgecore</code> with updated configuration. If not, you can just use <code>pkill</code> command to stop origin <code>edgecore</code> progress, and start it again manually.</p><h1>Frequently Asked Questions</h1><p>The following description contains some common problems that might happen during the installation progress, and includes the recommended solutions to resolve it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-pre-flight-check-failed">cloudcore pre-flight check failed<a href="#cloudcore-pre-flight-check-failed" class="hash-link" aria-label="cloudcore pre-flight check failed的直接链接" title="cloudcore pre-flight check failed的直接链接">​</a></h2><p>cloudcore error log contains the below words:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error execution phase preflight: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Some fatal errors occurred</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This may be related to a previous installation failure having left over files from the previous installation attempt. You should run <code>keadm reset</code> command to clean up those files.</p><p>Other errors during the installation you can fix by following the steps shown on the screen according to the error prompt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timed-out-waiting-for-the-condition">timed out waiting for the condition<a href="#timed-out-waiting-for-the-condition" class="hash-link" aria-label="timed out waiting for the condition的直接链接" title="timed out waiting for the condition的直接链接">​</a></h2><p>When you install <code>cloudcore</code> in container mode with command <code>keadm init</code>, if you encounter the below problems:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># keadm init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes version verification passed, KubeEdge installation will start</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: timed out waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  keadm init </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Examples:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keadm init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- This </span><span class="token builtin class-name">command</span><span class="token plain"> will render and </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> the Charts </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> Kubeedge cloud component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">execute keadm </span><span class="token builtin class-name">command</span><span class="token plain"> failed:  timed out waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the condition</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Due to the fact that the progress of installing cloudcore components in container mode is the same as deploying any one application within a k8s cluster, we can use all the default k8s methods of debugging an application in k8s. By invoking the <code>keadm init</code> command, we&#x27;ll deploy all of <code>cloudcore</code> related resources in k8s <code>kubeedge</code> namespace. So you can get important information about all related resources with command <code>kubectl get all -n kubeedge</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get all -nkubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS             RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cloudcore-644d8f55df-sj7xc   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     ImagePullBackOff   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          5m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                TYPE        CLUSTER-IP      EXTERNAL-IP   PORT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">                                             AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/cloudcore   ClusterIP   </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.179.211   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">        </span><span class="token number" style="color:#36acaa">10000</span><span class="token plain">/TCP,10001/TCP,10002/TCP,10003/TCP,10004/TCP   5m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cloudcore   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">           5m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cloudcore-644d8f55df   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">       5m58s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If all the resources are created, then you can check whether <code>cloudcore</code> pod is in Running status.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-pending-status">cloudcore in pending status<a href="#cloudcore-in-pending-status" class="hash-link" aria-label="cloudcore in pending status的直接链接" title="cloudcore in pending status的直接链接">​</a></h3><p>If the pod <code>cloudcore</code> is in <code>Pending</code> status, it&#x27;s often due to pod scheduling failures. You can run <code>kubectl describe</code> command to try to fix it. For example, the output may be like shown below.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get pod -n kubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-78hzb   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1     Pending   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          111s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kubectl describe pod cloudcore-f88bbf5bb-78hzb -nkubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:             cloudcore-f88bbf5bb-78hzb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:        kubeedge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type     Reason            Age                  From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----     ------            ----                 ----               -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Warning  FailedScheduling  55s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x3 over 2m13s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  default-scheduler  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">/1 nodes are available: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> had taint </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">node-role.kubernetes.io/control-plane: </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, that the pod didn&#x27;t tolerate.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can see that the reason is that <code>0/1 nodes are available: 1 node(s) had taint {node-role.kubernetes.io/control-plane: }, that the pod didn&#x27;t tolerate.</code> This is often occurs when you only have one control plane node. By default, your cluster will not schedule Pods on the control plane nodes for security reasons. If you want to be able to schedule Pods on the control plane nodes, for example in a single machine Kubernetes cluster, run:
<code>kubectl taint nodes --all node-role.kubernetes.io/control-plane- node-role.kubernetes.io/master-</code>
For more details, please refer to <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#control-plane-node-isolation" target="_blank" rel="noopener noreferrer">k8s docs</a>. And then you can find your <code>cloudcore</code> is running successfully and in <code>Running</code> status.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl get pod -n kubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-78hzb   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">          9m1s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more details about taint and toleration, you can refer to <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/" target="_blank" rel="noopener noreferrer">k8s official docs</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-imagepullbackoff-status">cloudcore in ImagePullBackOff status<a href="#cloudcore-in-imagepullbackoff-status" class="hash-link" aria-label="cloudcore in ImagePullBackOff status的直接链接" title="cloudcore in ImagePullBackOff status的直接链接">​</a></h3><p>If the pod <code>cloudcore</code> is in <code>ImagePullBackOff</code> status, it&#x27;s often due to pod image issues. You can run <code>kubectl describe</code> command to find more details. For example, the output may be showing like below.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># kubectl describe pod cloudcore-644d8f55df-sj7xc -nkubeedge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type     Reason     Age                     From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----     ------     ----                    ----               -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Scheduled  8m39s                   default-scheduler  Successfully assigned kubeedge/cloudcore-644d8f55df-sj7xc to kind-control-plane</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Pulling    6m59s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x4 over 8m39s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   kubelet            Pulling image </span><span class="token string" style="color:#e3116c">&quot;kubeedge/cloudcore:v1.12.19&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Warning  Failed     6m58s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x4 over 8m37s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   kubelet            Failed to pull image </span><span class="token string" style="color:#e3116c">&quot;kubeedge/cloudcore:v1.12.19&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> rpc error: code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> NotFound desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> failed to pull and unpack image </span><span class="token string" style="color:#e3116c">&quot;docker.io/kubeedge/cloudcore:v1.12.19&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> failed to resolve reference </span><span class="token string" style="color:#e3116c">&quot;docker.io/kubeedge/cloudcore:v1.12.19&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> docker.io/kubeedge/cloudcore:v1.12.19: not found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Warning  Failed     6m58s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x4 over 8m37s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   kubelet            Error: ErrImagePull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Warning  Failed     6m45s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x6 over 8m37s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   kubelet            Error: ImagePullBackOff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   BackOff    3m36s </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x20 over 8m37s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  kubelet            Back-off pulling image </span><span class="token string" style="color:#e3116c">&quot;kubeedge/cloudcore:v1.12.19&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we can find the core reason why cloudcore did&#x27;t start successfully. It&#x27;s due to <code>Failed to pull image &quot;kubeedge/cloudcore:v1.12.19&quot;: rpc error: code = NotFound desc = failed to pull and unpack image &quot;docker.io/kubeedge/cloudcore:v1.12.19&quot;: failed to resolve reference &quot;docker.io/kubeedge/cloudcore:v1.12.19&quot;: docker.io/kubeedge/cloudcore:v1.12.19: not found</code>. There&#x27;s no <code>docker.io/kubeedge/cloudcore:v1.12.19</code> image. In other words, we specified a wrong kubeedge version, which does not exist. So we can run <code>keadm reset</code> to clear the last installation, or just run <code>kubectl delete ns kubeedge</code> directly, and then run <code>keadm init</code> to start a new installation, with a correct version.</p><p>During the cloudcore container installation progress, keadm will pull the required images from dockerhub by default. Users can pull the required images in advance, which is also supported by <code>keadm</code>. To do so, users can run <code>keadm config images</code> related commands to display or pull all the required images.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># keadm config images pull --kubeedge-version=v1.12.0 --part=cloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pulling kubeedge/iptables-manager:v1.12.0 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully pulled kubeedge/iptables-manager:v1.12.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pulling kubeedge/controller-manager:v1.12.0 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully pulled kubeedge/controller-manager:v1.12.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pulling kubeedge/admission:v1.12.0 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully pulled kubeedge/admission:v1.12.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pulling kubeedge/cloudcore:v1.12.0 </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully pulled kubeedge/cloudcore:v1.12.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloudcore-in-crashloopbackoff-status">cloudcore in CrashLoopBackOff status<a href="#cloudcore-in-crashloopbackoff-status" class="hash-link" aria-label="cloudcore in CrashLoopBackOff status的直接链接" title="cloudcore in CrashLoopBackOff status的直接链接">​</a></h3><p>If <code>cloudcore</code> pod is in <code>CrashLoopBackOff</code> status, it means that cloudcore pod startup failed. Users should check cloudcore logs by running <code>kubectl logs</code> command. And fix it according to the log error.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="edgecore-failed-to-get-ca-certificate">EdgeCore failed to get CA certificate<a href="#edgecore-failed-to-get-ca-certificate" class="hash-link" aria-label="EdgeCore failed to get CA certificate的直接链接" title="EdgeCore failed to get CA certificate的直接链接">​</a></h2><p>During the edgecore installation, edgecore will communicate with cloudcore to get the CA certificate. Users can encounter the below issues:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">failed to get CA certificate, err: Get </span><span class="token string" style="color:#e3116c">&quot;https://192.168.47.128:10002/ca.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.47.128:10002: connect: connection refused</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">failed to get CA certificate, err: Get </span><span class="token string" style="color:#e3116c">&quot;https://192.168.47.128:10002/ca.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error: failed to get CA certificate, err: Get </span><span class="token string" style="color:#e3116c">&quot;https://192.168.47.128:10002/ca.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.47.128:10002: connect: no route to </span><span class="token function" style="color:#d73a49">host</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">failed to get CA certificate, err: Get </span><span class="token string" style="color:#e3116c">&quot;https://192.168.47.128:10002/ca.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.47.128:10002: i/o </span><span class="token function" style="color:#d73a49">timeout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Troubleshooting step:</p><ul><li><p>Does the cloudcore IP address, the edge node is configured to join to, exist in the cloudcore advertise-address list?</p></li><li><p>Can the edgecore connect to the cloudcore IP address? Are the two nodes connected over the physical network? Are there firewall restrictions?</p></li><li><p>Do cloudcore components on the cloud side start successfully and are the accessed ports(e.g. 10000 and 10002) listening?</p></li><li><p>If all the above preceding steps were checked and are not showing any problems, run the following command to check whether cloudcore logs contain any errors: <code>kubectl logs cloudcore-xxxx -n kubeedge</code></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="keadm-join-pull-image-failed-in-edge-nodes"><code>keadm join</code> pull image failed in edge nodes<a href="#keadm-join-pull-image-failed-in-edge-nodes" class="hash-link" aria-label="keadm-join-pull-image-failed-in-edge-nodes的直接链接" title="keadm-join-pull-image-failed-in-edge-nodes的直接链接">​</a></h2><p>Users may encounter the below errors when running <code>keadm join</code> command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">edge node join failed: pull Images failed: xxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Troubleshooting steps:</p><ul><li>Can edge nodes access the Internet? <code>keadm join</code> will by default pull <code>kubeedge/installation-package</code> image, from dockerhub. If so, users should fix according to the specific error information.</li><li>If edge nodes cannot access the Internet, there&#x27;re two ways to avoid this error:<ol><li>download images on another machines which can access the Internet, and load images manually to the edge nodes</li><li>download images on another machines which can access the Internet, and push images to an internal image repository, and then run <code>keadm join</code> command with flag <code>--image-repository=xxx</code> to specify the internal image repository.</li></ol></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="token-related-issues">Token related issues<a href="#token-related-issues" class="hash-link" aria-label="Token related issues的直接链接" title="Token related issues的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-token-credentials-are-in-the-wrong-format">Error: token credentials are in the wrong format<a href="#error-token-credentials-are-in-the-wrong-format" class="hash-link" aria-label="Error: token credentials are in the wrong format的直接链接" title="Error: token credentials are in the wrong format的直接链接">​</a></h3><p>If you find that edgecore don&#x27;t start, and the edgecore log contains error message like below</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">F1121 </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:14:39.583329 </span><span class="token number" style="color:#36acaa">3644556</span><span class="token plain"> certmanager.go:94</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error: token credentials are </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the wrong </span><span class="token function" style="color:#d73a49">format</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This means the edgecore token is not correct. You should run <code>keadm gettoken</code> on the cloud side to get token, and then copy it to <code>modules.edgeHub.token</code> field.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># cat /etc/kubeedge/config/edgecore.yaml </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: edgecore.config.kubeedge.io/v1alpha2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: EdgeCore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  edgeHub:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    token: </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># --- here is token, which will be used when joining edge nodes to cloud.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="invalid-token">Invalid Token<a href="#invalid-token" class="hash-link" aria-label="Invalid Token的直接链接" title="Invalid Token的直接链接">​</a></h3><p>If edgecore log contains errors like below</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">F1121 </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:22:42.419103 </span><span class="token number" style="color:#36acaa">3646881</span><span class="token plain"> certmanager.go:94</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error: failed to get edge certificate from the cloudcore, error: Invalid authorization token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And cloudcore log contains errors like below</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">E1121 06:22:42.418947       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> server.go:104</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> failed to sign the certificate </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> edgenode: edge-node, invalid token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This means that you copied an INCORRECT token to edgecore configuration. So you should run <code>keadm gettoken</code> on the cloud side to get token again, and copy it to <code>modules.edgeHub.token</code> field correctly and carefully.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="edgecore-failed-to-pass-the-certificate-verification">edgecore failed to pass the certificate verification<a href="#edgecore-failed-to-pass-the-certificate-verification" class="hash-link" aria-label="edgecore failed to pass the certificate verification的直接链接" title="edgecore failed to pass the certificate verification的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error: failed to get edge certificate from the cloudcore, error: Get &quot;https://192.168.47.128:10002/edge.crt&quot;: x509: certificate is valid for 192.168.47.127, not 192.168.47.128</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Error: failed to get edge certificate from the cloudcore, error: Get &quot;https://192.168.47.128:10002/edge.crt&quot;: x509: cannot validate certificate for 192.168.47.128 because it doesn&#x27;t contain any IP SANs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>cloudcore requires the configuration parameter advertise-address, which can contain multiple IP addresses, separated by commas, which need to be defined in advance. It&#x27;s recommended to use a load balancer or gateway address, to ensure load balancing and high availability of cloudcore. Currently, this address cannot be changed once it&#x27;s configured. The value of <code>cloudcore-ipport</code> at edgecore must exist in the cloudcore <code>advertise-address</code> list.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advertise-address-related-issues">Advertise-address related issues<a href="#advertise-address-related-issues" class="hash-link" aria-label="Advertise-address related issues的直接链接" title="Advertise-address related issues的直接链接">​</a></h2><p>The most common problems is due to that the IP address that cloudcore expose, is NOT the same as the IP address that edgecore use to connect to.</p><p>cloudcore expose IP address is located like below</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># cat cloudcore.yaml </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: cloudcore.config.kubeedge.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cloudHub:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    advertiseAddress:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.251     </span><span class="token comment" style="color:#999988;font-style:italic"># ------------- this IP address is what cloudcore expose.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>IP address that edgecore use to connect to cloud is like below:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># cat edgecore.yaml </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: edgecore.config.kubeedge.io/v1alpha2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: EdgeCore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  edgeHub:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    heartbeat: </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpServer: https://192.168.1.251:10002   </span><span class="token comment" style="color:#999988;font-style:italic"># ----- this is edgecore used to get ca/certs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messageBurst: </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    messageQPS: </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    projectID: e632aba927ea4ac2b575ec1603d56f10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quic:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enable: </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      handshakeTimeout: </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      readDeadline: </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      server: </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.251:10001  </span><span class="token comment" style="color:#999988;font-style:italic"># ----- this is edgecore used to connect cloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      writeDeadline: </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    websocket:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enable: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      handshakeTimeout: </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      readDeadline: </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      server: </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.251:10000 </span><span class="token comment" style="color:#999988;font-style:italic"># ----- this is edgecore used to connect cloud</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      writeDeadline: </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First, now KubeEdge don&#x27;t support update cloudcore advertiseAddress, so it&#x27;s very important for users to set one or more advertise addresses in installation progress.</p><p>One important thing is that the two IP address should be kept the same. Or edgecore logs will report the following errors</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">E1118 16:00:52.632311 1947817 ws.go:78] dial websocket error(x509: certificate is valid for 192.168.1.251, not 127.0.0.1), response message: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">E1118 16:00:52.632338 1947817 websocket.go:90] Init websocket connection failed x509: certificate is valid for 192.168.1.251, not 127.0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So in one word, in our installation, we must ensure the two IP address are the same, regardless of which method we choose, <code>keadm init</code> or <code>keadm deprecated init</code> or run cloudcore manually, <code>keadm join</code> or <code>keadm deprecated join</code> or run edgecore manually. In other words, we must use <code>--advertise-address</code> and <code>--cloudcore-ipport</code> flags in the command line.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keadm init --advertise-address=${THE-EXPOSED-IP}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keadm deprecated init --advertise-address=${THE-EXPOSED-IP}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keadm join --cloudcore-ipport=${THE-EXPOSED-IP}:10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keadm deprecated join --cloudcore-ipport=${THE-EXPOSED-IP}:10000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By default, if we just run <code>keadm init --advertise-address=${THE-EXPOSED-IP} --profile version=v1.12.0</code> to install cloudcore. We&#x27;ll create a <code>cloudcore</code> service with <code>ClusterIP</code> as its ServiceType. And a <code>cloudcore</code> pod which will use <code>hostNetwork</code>, which means that the pod will run in the host network of the node where the pod is deployed. So here <code>${THE-EXPOSED-IP}</code> should be replaced with IP address of your k8s node, where <code>cloudcore</code> is deployed. You can run <code>kubectl get node -owide</code> to get k8s node IP addresses. And we also should use this IP address to join edge nodes.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl get pod -nkubeedge -owide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE     IP           NODE                 NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cloudcore-f88bbf5bb-blgzv   1/1     Running   0          8m42s   172.18.0.2   kind-control-plane   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># kubectl get node -owide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      STATUS     ROLES                  AGE   VERSION                                                    INTERNAL-IP     EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION       CONTAINER-RUNTIME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind-control-plane        Ready      control-plane,master   20m   v1.21.1                                                    172.18.0.2      &lt;none&gt;        Ubuntu 21.04         4.15.0-169-generic   containerd://1.5.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above output shows that the IP address of the pod is the same as that of the k8s node, both IP addresses are <code>172.18.0.2</code>. This also indicates that the pod is running in the host network of the node. So we should use <code>172.18.0.2</code> as <code>${THE-EXPOSED-IP}</code>, but not others. Or edgecore will report below errors:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">F1121 </span><span class="token number" style="color:#36acaa">15</span><span class="token plain">:21:15.154526 </span><span class="token number" style="color:#36acaa">3671032</span><span class="token plain"> certmanager.go:94</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Error: failed to get CA certificate, err: Get </span><span class="token string" style="color:#e3116c">&quot;https://10.96.179.211:10002/ca.crt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> dial tcp </span><span class="token number" style="color:#36acaa">10.96</span><span class="token plain">.179.211:10002: i/o </span><span class="token function" style="color:#d73a49">timeout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>One more important thing about <code>cloudcore</code> container mode is about how to expose cloudcore port to edge nodes. In container mode, we will also create a cloudcore service. And it&#x27;s your duty to choose a LoadBalancer or adjust it to <code>NodePort</code> ServiceType, to expose <code>cloudcore</code> service to edge nodes. For more details, please reference <a href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types" target="_blank" rel="noopener noreferrer">k8s service docs</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="runtime运行时相关问题">Runtime(运行时)相关问题<a href="#runtime运行时相关问题" class="hash-link" aria-label="Runtime(运行时)相关问题的直接链接" title="Runtime(运行时)相关问题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unknown-service-runtimev1alpha2imageservice">unknown service runtime.v1alpha2.ImageService<a href="#unknown-service-runtimev1alpha2imageservice" class="hash-link" aria-label="unknown service runtime.v1alpha2.ImageService的直接链接" title="unknown service runtime.v1alpha2.ImageService的直接链接">​</a></h3><p>如果你在执行keadm join时遇到了类似如下报错：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">execute keadm </span><span class="token builtin class-name">command</span><span class="token plain"> failed: edge </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> failed: pull Images failed: rpc error: code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Unimplemented desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> unknown </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> runtime.v1alpha2.ImageService</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>说明你的containerd没有开启<code>cri</code>插件，你可以检查containerd的配置文件<code>/etc/containerd/config.toml</code>中的<code>disabled_plugins</code>字段是否包含<code>cri</code>。你可以通过编辑配置文件，删除<code>disabled_plugins</code>中的<code>cri</code>，修改之后请重启containerd。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="failed-to-reserve-sandbox-name">failed to reserve sandbox name<a href="#failed-to-reserve-sandbox-name" class="hash-link" aria-label="failed to reserve sandbox name的直接链接" title="failed to reserve sandbox name的直接链接">​</a></h3><p>如果你在执行keadm join时遇到了类似如下报错：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">execute keadm </span><span class="token builtin class-name">command</span><span class="token plain"> failed: edge </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">join</span><span class="token plain"> failed: copy resources failed: rpc error: code </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Unknown desc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> failed to reserve sandbox name </span><span class="token string" style="color:#e3116c">&quot;edgecore_kubeedge__0&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> name </span><span class="token string" style="color:#e3116c">&quot;edgecore_kubeedge__0&quot;</span><span class="token plain"> is reserved </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>说明在你的机器上有残留的同名containerd容器或者任务，你可以按照如下步骤清理： </p><ol><li><code>ctr -n k8s.io t ls</code>, 如果有残留的task，请执行<code>ctr -n k8s.io t kill {task id}</code>清理</li><li><code>ctr -n k8s.io c ls</code>, 如果有残留的容器，请执行<code>ctr -n k8s.io c rm {container id}</code>清理</li><li>执行<code>systemctl restart containerd.service</code>重启containerd</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cni-plugin-not-initializedcni-config-uninitialized">cni plugin not initialized/cni config uninitialized<a href="#cni-plugin-not-initializedcni-config-uninitialized" class="hash-link" aria-label="cni plugin not initialized/cni config uninitialized的直接链接" title="cni plugin not initialized/cni config uninitialized的直接链接">​</a></h3><p>目前在使用cri runtime时，执行keadm join需要先安装cni plugin并配置cni config，您可以参考以下步骤执行。</p><ol><li>从 <a href="https://github.com/containernetworking/plugins/releases" target="_blank" rel="noopener noreferrer">https://github.com/containernetworking/plugins/releases</a> 下载 cni-plugins-{OS}-{ARCH}-{VERSION}.tgz，并将其解压到/opt/cni/bin:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /opt/cni/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.1.1.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>创建CNI config</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /etc/cni/net.d/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/etc/cni/net.d/10-containerd-net.conflist </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;cniVersion&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;name&quot;: &quot;containerd-net&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;plugins&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;type&quot;: &quot;bridge&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;bridge&quot;: &quot;cni0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;isGateway&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;ipMasq&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;promiscMode&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;ipam&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;type&quot;: &quot;host-local&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;ranges&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;subnet&quot;: &quot;10.88.0.0/16&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">            &quot;subnet&quot;: &quot;2001:db8:4860::/64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;routes&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          { &quot;dst&quot;: &quot;0.0.0.0/0&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          { &quot;dst&quot;: &quot;::/0&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;type&quot;: &quot;portmap&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;capabilities&quot;: {&quot;portMappings&quot;: true}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>重启containerd </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cgroup-driver-不匹配">cgroup driver 不匹配<a href="#cgroup-driver-不匹配" class="hash-link" aria-label="cgroup driver 不匹配的直接链接" title="cgroup driver 不匹配的直接链接">​</a></h3><p>如果你在安装EdgeCore出现如下报错：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">failed to create shim task: OCI runtime create failed: runc create failed: expected cgroupsPath to be of format &quot;slice:prefix:name&quot; for systemd cgroups</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者在EdgeCore日志中出现：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubelet cgroup driver: &quot;cgroupfs&quot; is different from docker cgroup driver: &quot;systemd&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>说明你安装的运行时的cgroup驱动与KubeEdge的配置不符，KubeEdge默认配置的是<code>cgroupfs</code> cgroup驱动。你可以选择修改runtime的配置，或者在keadm join时设置<code>--remote-runtime-endpoint=unix:///var/run/crio/crio.sock</code>，或者修改EdgeCore的配置文件(edgecore.yaml)中的如下字段：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">modules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">edged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tailoredKubeletConfig</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cgroupDriver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> systemd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>当你需要使用<code>systemd</code> cgroup驱动，并且在使用keadm join安装部分版本(v1.12.0-1.12.4, v1.13.0-1.13.2, v1.14.0-1.14.2)的EdgeCore时，可能也会出现<code>OCI runtime create failed</code>的报错，建议使用对应release版本的最新patch版本</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/gameone/docs/category/frequently-asked-questions-faq"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Frequently Asked Questions (FAQ)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-check-logs" class="table-of-contents__link toc-highlight">How to check logs?</a><ul><li><a href="#how-to-check-cloudcore-logs" class="table-of-contents__link toc-highlight">How to check cloudcore logs?</a></li><li><a href="#how-to-check-edgecore-logs" class="table-of-contents__link toc-highlight">How to check edgecore logs?</a></li></ul></li><li><a href="#how-to-update-configuration" class="table-of-contents__link toc-highlight">How to update configuration?</a><ul><li><a href="#how-to-modify-cloudcore-configuration" class="table-of-contents__link toc-highlight">How to modify cloudcore configuration?</a></li><li><a href="#how-to-modify-edgecore-configuration" class="table-of-contents__link toc-highlight">How to modify edgecore configuration?</a></li></ul></li><li><a href="#cloudcore-pre-flight-check-failed" class="table-of-contents__link toc-highlight">cloudcore pre-flight check failed</a></li><li><a href="#timed-out-waiting-for-the-condition" class="table-of-contents__link toc-highlight">timed out waiting for the condition</a><ul><li><a href="#cloudcore-in-pending-status" class="table-of-contents__link toc-highlight">cloudcore in pending status</a></li><li><a href="#cloudcore-in-imagepullbackoff-status" class="table-of-contents__link toc-highlight">cloudcore in ImagePullBackOff status</a></li><li><a href="#cloudcore-in-crashloopbackoff-status" class="table-of-contents__link toc-highlight">cloudcore in CrashLoopBackOff status</a></li></ul></li><li><a href="#edgecore-failed-to-get-ca-certificate" class="table-of-contents__link toc-highlight">EdgeCore failed to get CA certificate</a></li><li><a href="#keadm-join-pull-image-failed-in-edge-nodes" class="table-of-contents__link toc-highlight"><code>keadm join</code> pull image failed in edge nodes</a></li><li><a href="#token-related-issues" class="table-of-contents__link toc-highlight">Token related issues</a><ul><li><a href="#error-token-credentials-are-in-the-wrong-format" class="table-of-contents__link toc-highlight">Error: token credentials are in the wrong format</a></li><li><a href="#invalid-token" class="table-of-contents__link toc-highlight">Invalid Token</a></li></ul></li><li><a href="#edgecore-failed-to-pass-the-certificate-verification" class="table-of-contents__link toc-highlight">edgecore failed to pass the certificate verification</a></li><li><a href="#advertise-address-related-issues" class="table-of-contents__link toc-highlight">Advertise-address related issues</a></li><li><a href="#runtime运行时相关问题" class="table-of-contents__link toc-highlight">Runtime(运行时)相关问题</a><ul><li><a href="#unknown-service-runtimev1alpha2imageservice" class="table-of-contents__link toc-highlight">unknown service runtime.v1alpha2.ImageService</a></li><li><a href="#failed-to-reserve-sandbox-name" class="table-of-contents__link toc-highlight">failed to reserve sandbox name</a></li><li><a href="#cni-plugin-not-initializedcni-config-uninitialized" class="table-of-contents__link toc-highlight">cni plugin not initialized/cni config uninitialized</a></li><li><a href="#cgroup-driver-不匹配" class="table-of-contents__link toc-highlight">cgroup driver 不匹配</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">2023 © GameOne Project Authors. All rights reserved. GameOne项目组，版权所有！</div></div></div></footer></div>
<script src="/gameone/assets/js/runtime~main.94491653.js"></script>
<script src="/gameone/assets/js/main.07136e89.js"></script>
</body>
</html>