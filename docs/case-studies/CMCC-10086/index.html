<!doctype html>
<html lang="zh" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">中国移动 | CassItComp</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://caitechs.github.io/gameone/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://caitechs.github.io/gameone/case-studies/CMCC-10086/"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="中国移动 | CassItComp"><meta data-rh="true" name="description" content="基于KubeEdge云边协同框架打造，提升对边缘的纳管能力以及服务发布效率，优化网络与负载均衡，构建分级镜像仓库，缩小故障影响范围。"><meta data-rh="true" property="og:description" content="基于KubeEdge云边协同框架打造，提升对边缘的纳管能力以及服务发布效率，优化网络与负载均衡，构建分级镜像仓库，缩小故障影响范围。"><link data-rh="true" rel="canonical" href="https://caitechs.github.io/gameone/case-studies/CMCC-10086/"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/case-studies/CMCC-10086/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://caitechs.github.io/gameone/case-studies/CMCC-10086/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gameone/blog/rss.xml" title="CassItComp RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gameone/blog/atom.xml" title="CassItComp Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9PL5BPEXGS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9PL5BPEXGS",{anonymize_ip:!0})</script>






<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="shortcut icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="manifest" href="/favicons/site.webmanifest">
<meta name="theme-color" content="#ffffff">
<meta name="msapplication-config" content="/favicons/browserconfig.xml"><link rel="stylesheet" href="/gameone/assets/css/styles.c5a3b718.css">
<link rel="preload" href="/gameone/assets/js/runtime~main.94491653.js" as="script">
<link rel="preload" href="/gameone/assets/js/main.07136e89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/gameone/"><div class="navbar__logo"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gameone/img/avatar.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Gameone 机器自动评分系统</b></a><a class="navbar__item navbar__link" target="_self" href="/gameone/docs">文档</a><a class="navbar__item navbar__link" target="_self" href="/gameone/blog">博客  </a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/gameone/case-studies">案例中心</a><a class="navbar__item navbar__link" href="/gameone/partners">合作伙伴</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/caitechs/gameone" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link heade-icon"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/gameone/case-studies/CMCC-10086/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>基于KubeEdge实现中国移动10086客服云边协同平台</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="中国移动基础架构变更历程">中国移动基础架构变更历程<a href="#中国移动基础架构变更历程" class="hash-link" aria-label="中国移动基础架构变更历程的直接链接" title="中国移动基础架构变更历程的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="中国移动在线营销服务中心介绍">中国移动在线营销服务中心介绍<a href="#中国移动在线营销服务中心介绍" class="hash-link" aria-label="中国移动在线营销服务中心介绍的直接链接" title="中国移动在线营销服务中心介绍的直接链接">​</a></h3><p>在线营销服务中心是中国移动通信集团二级专业机构，负责全网在线服务资源和线上渠道运营管理，拥有全球最大的呼叫中心 ，自有坐席4.4万，服务用户9亿，53个客服中心，是客服技术和客服业务的时代引领者。</p><p><img loading="lazy" alt="中国移动路标" src="/gameone/assets/images/roadmap-1052ec6105cb8c06beca01a398d7357a.png" width="864" height="281" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="云原生路线">云原生路线<a href="#云原生路线" class="hash-link" aria-label="云原生路线的直接链接" title="云原生路线的直接链接">​</a></h2><p><img loading="lazy" alt="云原生路线" src="/gameone/assets/images/cloud-native-route-e96c0b731d15496bf15899f04697d92a.png" width="864" height="382" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="云边协同方案具体选型">云边协同方案具体选型<a href="#云边协同方案具体选型" class="hash-link" aria-label="云边协同方案具体选型的直接链接" title="云边协同方案具体选型的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="需求">需求<a href="#需求" class="hash-link" aria-label="需求的直接链接" title="需求的直接链接">​</a></h3><p>公司核心的融合客服系统具有“话务集中控制、媒体就近接入”的架构特性，需在各省分公司机房部署少量的服务器设备，所以全网服务器资源形成以双中心+31省分公司为接入点的星状拓扑结构。另外为解决网络时延、音视频数据传输等瓶颈，满足营销服务业务高标准的用户体验要求，公司视频客服、全语音门户等多媒体业务系统向分公司下沉部署。分公司资源池暴露出以下问题：</p><p>问题1：业务支撑响应慢。分公司业务系统存在独立资源池的“烟囱式”问题，系统间的服务器资源无法共享，敏捷性较差，无法实现系统快速弹性扩缩容，影响营销服务业务的客户体验和系统稳定性；</p><p>问题2：业务运维效率低。分公司部署的业务模块均为人工手动维护，人工操作易出错、效率低、故障率高。</p><p>问题3：资源利用率低。目前分公司服务器以传统虚拟化技术为主要支撑形态，导致算力无法聚合，资源利用不充分，低效、冗余资源亟需整合利旧。</p><p><img loading="lazy" alt="国内部署" src="/gameone/assets/images/nationwide-deployment-1f44ac4f5b104f4d041274f11f4055a7.png" width="864" height="287" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="云边协同选型分析">云边协同选型分析<a href="#云边协同选型分析" class="hash-link" aria-label="云边协同选型分析的直接链接" title="云边协同选型分析的直接链接">​</a></h3><p>当时我们面临分公司的节点该如何管理的问题？边缘存在形态主要有两种：边缘集群、边缘节点。</p><p><img loading="lazy" alt="边缘集群、边缘节点" src="/gameone/assets/images/edge-cluster-or-node-c849d25fbc728272eb3eb770d046d822.png" width="863" height="409" class="img_ev3q"></p><p>边缘集群作为一个存在，意味着它有一个全量的管理资源，必然在生产上还要满足高性能高可用，因此在管理层面的一些资源其实对于物理机的开销也是比较大的。</p><p>相对来说，边缘节点的整体形态，可以复用云端管理能力，也就是k8s的master节点，同时它具备天然优势云边协同，可以再从云端直接控制到边缘的一些服务。在这种情况下，它面临着给这种平台的建设提出两点挑战：第一点是离线自治，离线自治是指在分公司云边端网或在弱网络环境下，让其能够完整的 Kubelet，或者边缘的组件能够正常拉起来我们的一些Pod，或者是在弱网环路下，整个主机的重启，必须确保业务Pod能够正常被拉起来。如此我们必须得在边缘节点具备离线自治的能力。同时如果是以边缘节点形式存在，最主要的核心因素是要全面兼容k8s API。</p><p>在综合分析和对比之后，因为我们在分公司边缘节点的服务器数量是有限的，如果采用全量集群的方式，会导致大量资源的浪费。因此我们决定以边缘节点为主导形式，然后去进行技术选型。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="云边协同框架">云边协同框架<a href="#云边协同框架" class="hash-link" aria-label="云边协同框架的直接链接" title="云边协同框架的直接链接">​</a></h2><p>基于轻量级容器编排框架KubeEdge的云边协同技术，打造“中心+边缘”的云边协同架构，实现以本部双中心服务器为中心节点，分公司为边缘节点的“计算拉伸方案”落地，将容器云计算能力下沉至边缘节点，实现统一的资源调度和纳管能力。</p><p><img loading="lazy" alt="网络方案" src="/gameone/assets/images/network-eb474b0aee20122ab489514faab6befa.png" width="863" height="411" class="img_ev3q"></p><p><strong>集中管理：</strong> 通过统一容器管理平台进行集群的管理</p><p><strong>边缘纳管：</strong> 基于KubeEdge框架完成边缘节点的纳管</p><p><strong>离线自治：</strong> EdgeCore基础上增加边缘代理，提升离线自治能力</p><p><strong>CI/CD：</strong> 复用管理平台CICD构建能力，提升服务发布效率</p><p><strong>云边协同：</strong> 构建数据协同、管理协同、运维协同的平台</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="落地阶段问题以及解决方案介绍">落地阶段问题以及解决方案介绍<a href="#落地阶段问题以及解决方案介绍" class="hash-link" aria-label="落地阶段问题以及解决方案介绍的直接链接" title="落地阶段问题以及解决方案介绍的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="边缘网络">边缘网络<a href="#边缘网络" class="hash-link" aria-label="边缘网络的直接链接" title="边缘网络的直接链接">​</a></h3><p>边缘节点网络可选模型较多，综合分析对比，确定落地Calico IP-in-IP网络方案，实现分公司内流量闭环。</p><p><img loading="lazy" alt="边缘网络方案" src="/gameone/assets/images/edge-network-32ef8481d48ee5d114ba6881722de124.png" width="863" height="388" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="边缘资源管理">边缘资源管理<a href="#边缘资源管理" class="hash-link" aria-label="边缘资源管理的直接链接" title="边缘资源管理的直接链接">​</a></h3><p>常规的租户分区模式有资源配额限制，资源碎片化较为严重，不能有效的支撑容器云弹性伸缩的特性，不适合企业级大规模应用。</p><p>我们基于 k8s的污点技术，设计了资源池的一种模式如图所示，通过建立几个池子来部署业务资源，业务的pod就可以直接指定这个业务资源，和物理机绑定之后，就会消除上述问题。</p><p><img loading="lazy" alt="边缘资源管理" src="/gameone/assets/images/edge-resource-management-dd782b88ae449af7687f6b6c7006e8ae.png" width="558" height="455" class="img_ev3q"></p><p><strong>资源池技术：</strong></p><ul><li><p>污点技术：通过污点标签技术，将集群划分多个资源池；</p></li><li><p>调度能力：通过多污点容忍方式，按污点优先级不同，定义资源池调度优先级。</p></li></ul><p><strong>资源池优势：</strong></p><ul><li><p>提升资源利用率：不需要租户分区保留冗余资源，减少资源碎片化；</p></li><li><p>资源应急支撑能力：急资源池集中冗余资源算力，可大幅增强紧急状态下的资源支撑能力。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="边缘服务访问--能力下沉">边缘服务访问 | 能力下沉<a href="#边缘服务访问--能力下沉" class="hash-link" aria-label="边缘服务访问 | 能力下沉的直接链接" title="边缘服务访问 | 能力下沉的直接链接">​</a></h3><p>KubeEdge框架自身主要提供容器云计算能力的下沉，EdgeMesh模块提供了简单的服务暴露能力，但不能友好支撑七层的负载均衡，因此决定将云端的能力下沉。</p><p><img loading="lazy" alt="服务发现" src="/gameone/assets/images/service-discovery-f226335360ed7d8ef5394bc2f6dfb0d1.png" width="829" height="297" class="img_ev3q"></p><p>在集群内，它会存在两种流量，一种是东西向集群的流量，另外一个是集群对外的一个出口南北向流量。东西向流量我们决定将云端的KubeProxy整体以及CoreDNS进行下沉,这样在整体访问时，比如说有两个业务pod1和pod2的访问，pod1会通过每个分公司自己的专属域名后缀解析到自己的CoreDNS上面去。拿到Class IP后，再根据KubeProxy生成的iptables或ipvs策略，将流量在业务2上进行转发。</p><p>对于集群外的流量，我们是采用k8s内部的ingress部署定制后的ingress Controller完成完整的服务暴露。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="边缘服务访问服务分组分流">边缘服务访问&amp;服务分组分流<a href="#边缘服务访问服务分组分流" class="hash-link" aria-label="边缘服务访问&amp;服务分组分流的直接链接" title="边缘服务访问&amp;服务分组分流的直接链接">​</a></h3><p><img loading="lazy" alt="流量拓扑" src="/gameone/assets/images/traffic-topology-fb0e4e4ff1bca4c0e5ff7ac6d686770e.png" width="554" height="451" class="img_ev3q"></p><p><strong>流量隔离：</strong> 为应对超大规模流量接入，实现流量隔离，定义多IngressController并分配给一个或多个租户</p><p><strong>分组部署：</strong> 支持分组部署，满足应用系统的故障隔离，并缩小故障影响范围</p><p><strong>灰度发布：</strong> 为及早获得用户反馈，降低新应用升级的影响，将特定用户的请求分发到灰度服务，从而控制风险，并对产品特性的发布有一个循序渐进的迭代过程</p><p><strong>无感知发布：</strong> 采用主备服务模式，在发布过程中按照流量比例进行实例自动伸缩，从而达到业务无中断、用户无感知</p><p>接下来，为我们的优化内容：</p><p><strong>分级镜像仓库</strong></p><p>云边网络质量较差，采用统一的云端镜像仓库，镜像拉取可对网络带来较大的冲击，设计分级镜像仓库，降低镜像拉取对网络的冲击。</p><p><img loading="lazy" alt="分级镜像仓库" src="/gameone/assets/images/image-registry-1a408a1e4c6a863a4d4f950664ddef8f.png" width="864" height="520" class="img_ev3q"></p><p><strong>中心</strong></p><ul><li><p><strong>主备双仓：</strong> 主仓库对接OSS，备用仓库非高可用部署使用本地磁盘</p></li><li><p><strong>高可用：</strong> 主仓库通过keepalived +vip方式提供服务</p></li></ul><p><strong>边缘</strong></p><ul><li><p><strong>独立部署：</strong> 分公司部署独立镜像仓库，边缘节点就近拉取镜像</p></li><li><p><strong>高可用：</strong> 采用非高可用方式部署，但与中心仓库形成主备模式</p></li></ul><p><strong>管理</strong></p><ul><li><p><strong>集中构建：</strong> 利用管理平台CI能力实现镜像的集中构建</p></li><li><p><strong>统一推送：</strong> 分公司业务镜像实现对中心和边缘仓库的统一推送</p></li></ul><p><strong>联邦监控</strong></p><p>采用Prometheus+AlertManager+Grafana的形式监控，打造“中心+边缘”联邦式监控。</p><p><img loading="lazy" alt="监控" src="/gameone/assets/images/monitor-5540647898ec60a3fb1fd24e31146928.png" width="863" height="469" class="img_ev3q"></p><ul><li><p>联邦监控：分公司部署非高可用Prometheus，与云端Prometheus构建集群联邦</p></li><li><p>统一展示：数据集中汇总到总部Prometheus集群，统一对接Grafana面板进行数据展示</p></li><li><p>集中告警：数据在总部Prometheus进行分析，接入AlterManager进行数据告警</p></li><li><p>个性采集：边缘侧Prmetheus可根据业务监控需求，灵活对业务进行统一的监控数据采集</p></li></ul><p><strong>离线IP保持</strong></p><p>原生CNI组件基本上依赖云端能力（APIServer/ETCD），离线时无法完成IP分配，建设IP快照能力，实现Pod IP在离线重启保持不变。</p><p><strong>原有模式问题：</strong> IP分配由CNI进行控制，如何在离线情况下，Pod重启依旧保持原有IP？</p><p><strong>解决方式：</strong> 对CNI返回结果增加IP快照信息，在网络正常时，调用ipam组件进行IP分配；离线时使用本地磁盘</p><p><img loading="lazy" alt="离线IP保持" src="/gameone/assets/images/offline-ip-retention-eb56baf61350aa090dd647acf9a46553.png" width="864" height="498" class="img_ev3q"></p><ul><li><p><strong>无侵入：</strong> 对整体CNI的设计没有太多的侵入性的设计，可灵活对接其他CNI的实现</p></li><li><p><strong>易部署：</strong> 通过DaemonSet进行分发二进制即可</p></li><li><p><strong>易使用：</strong> 简单调整已有的CNI配置文件即可完成使用</p></li></ul><p><strong>边缘代理</strong></p><p>大边缘场景下，下沉较多的云端能力，构建边缘代理，提升系统组件离线自治能力，全面建设节点级别离线自治能力。</p><p><img loading="lazy" alt="边缘代理" src="/gameone/assets/images/edge-proxy-cddeb8b23f82fb0ab84bdffe9c9fe65f.png" width="863" height="541" class="img_ev3q"></p><ul><li><p><strong>问题：</strong> 网络断链之后，系统组件如何提供离线自治能力？</p></li><li><p><strong>解决方式：</strong> 增加边缘代理模块，通过http代理方式，代理系统组件请求，拦截请求数据，缓存在本地，在离线时，使用缓存数据对系统组件提供服务</p></li><li><p><strong>Tips：</strong> 该模式无法解决relist/rewatch的问题，可以尝试使用KubeEdge 1.6版本的边缘list-watch功能</p></li></ul><p><strong>边缘故障隔离</strong></p><p>采用两级隔离架构，实现自动监测、自动隔离等功能，全面覆盖集群关键组件及Node故障等场景，有效降低业务故障时间，保障业务持续稳定运行。</p><p><img loading="lazy" alt="故障隔离" src="/gameone/assets/images/fault-isolation-9984b85acd4e5ecd224adb4c63dd2a01.png" width="641" height="448" class="img_ev3q"></p><ul><li><p><strong>精确识别问题：</strong> 细粒度组件运行状态监控，叠加故障场景</p></li><li><p><strong>秒级故障诊断：</strong> Pod流量秒级切断，降低故障对业务影响</p></li><li><p><strong>双向心跳探测：</strong> 提升故障判断的准确率，避免node-agent启动引起问题</p></li><li><p><strong>区域级别探测：</strong> 精准识别单节点问题或者区域故障，避免边缘弱网环境下误判</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubeedge社区贡献">KubeEdge社区贡献<a href="#kubeedge社区贡献" class="hash-link" aria-label="KubeEdge社区贡献的直接链接" title="KubeEdge社区贡献的直接链接">​</a></h2><p>主要包含4个方面的内容，部分是基于KubeEdge的定制改造：</p><p><strong>1）keadm debug工具套件</strong></p><ul><li><p>丰富边缘节点故障时排查手段，简化边缘问题排查方式。主要包含keadm debug get/check/diagnose/collect命令</p></li><li><p>已贡献给KubeEdge社区</p></li></ul><p><strong>2）CloudCore内存占用优化</strong></p><ul><li><p>优化CloudCore内部 informer、client的使用方式，精简LocationCache缓存数据，整体内存占用降低40%左右</p></li><li><p>已贡献给KubeEdge社区</p></li></ul><p><strong>3）节点默认标签和污点</strong></p><ul><li><p>边缘节点启动时默认增加指定的label和taint，简化边缘节点添加特定属性的操作流程</p></li><li><p>已贡献给KubeEdge社区</p></li></ul><p><strong>4）主机资源预留</strong></p><ul><li><p>边缘节点预留系统资源，允许设置节点最大Pod数，避免整体资源被Pod全部占用，提升边缘节点的稳定性</p></li><li><p>待社区审核</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结未来演进方向">总结&amp;未来演进方向<a href="#总结未来演进方向" class="hash-link" aria-label="总结&amp;未来演进方向的直接链接" title="总结&amp;未来演进方向的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h3><p><strong>社区出发：</strong> 基于KubeEdge云边协同框架，提升了对边缘的纳管能力以及服务发布效率</p><p><strong>深入业务：</strong> 满足业务是第一优先级，提供合理的网络方案以及负载均衡方案</p><p><strong>完善周边：</strong> 构建分级镜像仓库，联邦监控等不断完善日常使用环节</p><p><strong>场景驱动：</strong> 细化故障场景，打造全面的故障隔离方案，缩小故障影响范围</p><p><strong>回馈社区：</strong> 从落地出发，完善KubeEdge能力，做社区贡献</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="未来演进方向">未来演进方向<a href="#未来演进方向" class="hash-link" aria-label="未来演进方向的直接链接" title="未来演进方向的直接链接">​</a></h3><p><strong>1）统一负载架构</strong></p><p>在整个云边架构，我们完成了 pod也就是容器的整体资源计算能力下沉，但往往因为一些历史原因或一些系统业务比较老旧，它必须得在虚拟上运行而无法在容器里运行。如果单独为这些业务维护一个资源池，业务量比较庞大。在这个基础上，我们发现开源社区的Kubevirt，它是用k8s去管理虚拟机，未来我们计划基于K8s、KubeEdge、Kubevirt完成边缘虚拟机的管理演进。</p><p><img loading="lazy" alt="未来演进" src="/gameone/assets/images/k8s-kubeedge-kubevirt-3a7e0aab74ab39e85ff1d1d6c73a0861.png" width="623" height="146" class="img_ev3q"></p><p><strong>2）边缘中间件服务纳管</strong></p><p>在我们的场景里，边缘分公司是有若干个服务器，它有自己的业务、数据库、中间件，在云上可以通过operator这种模式进行很好的管理。但在边缘这种弱网络环境下，listwatch请求并非完全可靠。那在边缘怎么去完成中间件的服务纳管？目前我们也在讨论中，尽可能的去打造K8s+KubeEdge+中间件服务的解决方式。</p><p><img loading="lazy" alt="中间件" src="/gameone/assets/images/middleware-74e059ca56261b3789a8fe397d8bf72b.png" width="722" height="360" class="img_ev3q"></p><p>很高兴有机会能够加入KubeEdge社区，希望有更多的开发者能够加入KubeEdge，一起建设云原生边缘计算生态。</p></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#中国移动基础架构变更历程" class="table-of-contents__link toc-highlight">中国移动基础架构变更历程</a><ul><li><a href="#中国移动在线营销服务中心介绍" class="table-of-contents__link toc-highlight">中国移动在线营销服务中心介绍</a></li></ul></li><li><a href="#云原生路线" class="table-of-contents__link toc-highlight">云原生路线</a></li><li><a href="#云边协同方案具体选型" class="table-of-contents__link toc-highlight">云边协同方案具体选型</a><ul><li><a href="#需求" class="table-of-contents__link toc-highlight">需求</a></li><li><a href="#云边协同选型分析" class="table-of-contents__link toc-highlight">云边协同选型分析</a></li></ul></li><li><a href="#云边协同框架" class="table-of-contents__link toc-highlight">云边协同框架</a></li><li><a href="#落地阶段问题以及解决方案介绍" class="table-of-contents__link toc-highlight">落地阶段问题以及解决方案介绍</a><ul><li><a href="#边缘网络" class="table-of-contents__link toc-highlight">边缘网络</a></li><li><a href="#边缘资源管理" class="table-of-contents__link toc-highlight">边缘资源管理</a></li><li><a href="#边缘服务访问--能力下沉" class="table-of-contents__link toc-highlight">边缘服务访问 | 能力下沉</a></li><li><a href="#边缘服务访问服务分组分流" class="table-of-contents__link toc-highlight">边缘服务访问&amp;服务分组分流</a></li></ul></li><li><a href="#kubeedge社区贡献" class="table-of-contents__link toc-highlight">KubeEdge社区贡献</a></li><li><a href="#总结未来演进方向" class="table-of-contents__link toc-highlight">总结&amp;未来演进方向</a><ul><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li><li><a href="#未来演进方向" class="table-of-contents__link toc-highlight">未来演进方向</a></li></ul></li></ul></div></div></div></main></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">2023 © GameOne Project Authors. All rights reserved. GameOne项目组，版权所有！</div></div></div></footer></div>
<script src="/gameone/assets/js/runtime~main.94491653.js"></script>
<script src="/gameone/assets/js/main.07136e89.js"></script>
</body>
</html>